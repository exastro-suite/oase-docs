
<!DOCTYPE html>

<html lang="ja">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    
    <title>9.3. アクション定義 &#8212; OASE Documentation  ドキュメント</title>
    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/option.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/copybutton.css" />
    
    <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
    <script src="../../../_static/jquery.js"></script>
    <script src="../../../_static/underscore.js"></script>
    <script src="../../../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../../../_static/doctools.js"></script>
    <script src="../../../_static/clipboard.min.js"></script>
    <script src="../../../_static/copybutton.js"></script>
    <script src="../../../_static/translations.js"></script>
  
    <script type="text/javascript" src="../../../_static/exastro_documents.js"></script>
    <link rel="shortcut icon" href="../../../_static/favicon.ico"/>
    <link rel="index" title="索引" href="../../../genindex.html" />
    <link rel="search" title="検索" href="../../../search.html" />
    <link rel="next" title="9.4. アクション承認" href="approval.html" />
    <link rel="prev" title="9.2. ルール作成" href="rule_format.html" /> 
  </head>
<body id="page" class="ja">


<div id="container">

<div id="header">
  <header class="divInner">
    <!-- Exastro logo -->
    <div id="logo"><img src="../../../_static/img/exastro.png" alt="Exastro"></div>
    <!-- Project name -->
    <div id="projectName"><a href="../../../index.html">OASE Documentation</a></div>
    <!-- Heaedr navigation -->
    <div id="headerSearch">
      <form class="search" action="../../../search.html" method="get">
        <input type="text" name="q" aria-labelledby="searchlabel">
        <button type="submit" value="検索"><img src="../../../_static/img/search.png" alt="検索"></button>
      </form>
    </div>
  </header>
</div><!-- End #header -->


<div id="toolbar">
  <div class="divInner">
    
    <div id="documentVersion">
      <dl>
        <dt>Document version</dt>
        <dd>
          <div>
            <select name="version" onchange="location.href=value;">
                file_path: v1.7/ja/rule_definition/action
                  <option value="#"
                  selected
                  >current</option>
                file_path: v1.7/ja/rule_definition/action
                  <option value="#"
                  selected
                  >v1.7 (current)</option>
                file_path: v1.6/ja/rule_definition/action
                  <option value="../../../v1.6/ja/rule_definition/action.html"
                  >v1.6</option>
                file_path: v1.5/ja/rule_definition/action
                  <option value="../../../v1.5/ja/rule_definition/action.html"
                  >v1.5</option>
            </select>
          </div>
        </dd>
      </dl>
    </div>

    <div id="documentLanguage">
      <dl>
        <dt>Language</dt>
        <dd>
          <div>
            <select name="lang" onchange="location.href=value;">
                file_path: v1.7/ja/rule_definition/action
                hasdoc: True
                  <option value="#"
                  selected
                  >日本語</option>
                file_path: v1.7/en/rule_definition/action
                hasdoc: False
            </select>
          </div>
        </dd>
      </dl>
    </div>
    <div id="toolbarNavigation">
      <ul>
        <li class="prev"><a href="rule_format.html" title="前のトピックへ"><span class="section-number">9.2. </span>ルール作成</a></li>
        <li class="next"><a href="approval.html" title="次のトピックへ"><span class="section-number">9.4. </span>アクション承認</a></li>
      </ul>
    </div>
  </div>
</div><!-- End #toolbar -->

<div id="sideMenu">

  <div id="menuButton"></div>
  
  <aside class="divInner">
    <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../../index.html">Exastro OASE 1.7</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../index.html">Exastro OASE 1.7 操作マニュアル</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../introduction/index.html">1. はじめに</a></li>
<li class="toctree-l3"><a class="reference internal" href="../installation/index.html">2. インストール</a></li>
<li class="toctree-l3"><a class="reference internal" href="../quickstart/index.html">3. クイックスタート</a></li>
<li class="toctree-l3"><a class="reference internal" href="../system/index.html">4. システム設定</a></li>
<li class="toctree-l3"><a class="reference internal" href="../authentication/index.html">5. アカウントと認証</a></li>
<li class="toctree-l3"><a class="reference internal" href="../security/index.html">6. セキュリティ</a></li>
<li class="toctree-l3"><a class="reference internal" href="../monitoring/index.html">7. 監視アプリケーションアダプタ設定</a></li>
<li class="toctree-l3"><a class="reference internal" href="../action/index.html">8. アクションドライバ設定</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="index.html">9. ルール定義</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="decision_table.html">9.1. ディシジョンテーブルの管理</a></li>
<li class="toctree-l4"><a class="reference internal" href="rule_format.html">9.2. ルール作成</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">9.3. アクション定義</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#exastro-it-automation">Exastro IT Automation 連携</a></li>
<li class="toctree-l5"><a class="reference internal" href="#mail">Mail 連携</a></li>
<li class="toctree-l5"><a class="reference internal" href="#servicenow">ServiceNow 連携</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="approval.html">9.4. アクション承認</a></li>
<li class="toctree-l4"><a class="reference internal" href="suppression.html">9.5. 抑止機能 ※準備中</a></li>
<li class="toctree-l4"><a class="reference internal" href="correlation.html">9.6. コリレーション機能 ※準備中</a></li>
<li class="toctree-l4"><a class="reference internal" href="apply_rule.html">9.7. ルール適用</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../rule_maintenance/index.html">10. ルールメンテナンス</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/index.html">11. API</a></li>
<li class="toctree-l3"><a class="reference internal" href="../trouble_shooting/index.html">12. トラブルシューティングガイド</a></li>
<li class="toctree-l3"><a class="reference internal" href="../appendix/index.html">13. 付録</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../v1.6/index.html">Exastro OASE 1.6</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../v1.5/index.html">Exastro OASE 1.5</a></li>
<li class="toctree-l1"><a class="reference external" href="https://exastro-suite.github.io/oase-docs/OASE_documents_ja/html/index.html">旧マニュアル</a></li>
</ul>

    <!-- <ul>
      <li class="toctree-l1"><a class="reference internal" href="../../../../genindex.html">索引</a></li>
    </ul> -->
    
  </aside>
</div><!-- End #sideMenu -->

<div id="contents">
<main class="divInner">


<div id="breadcrumbs">
  <ul>
    <li><a href="../../../index.html">HOME</a></li>
    <li><a href="../../index.html">Exastro OASE 1.7</a></li>
    <li><a href="../index.html">Exastro OASE 1.7 操作マニュアル</a></li>
    <li><a href="index.html"><span class="section-number">9. </span>ルール定義</a></li>
    
    <li><span class="section-number">9.3. </span>アクション定義</li>
  </ul>
</div>


<div id="article">
<article class="divInner">
<div class="body" role="main">

  <section id="id1">
<h1><span class="section-number">9.3. </span>アクション定義<a class="headerlink" href="#id1" title="Permalink to this heading">¶</a></h1>
<div class="line-block">
<div class="line">Exastro OASE から、Exastro IT Automation やメールサーバと連携するために、ディシジョンテーブルファイルの <span class="menuselection">アクションパラメータ情報</span> に適切なパラメータを記載する必要があります。</div>
<div class="line">本項では、連携可能なアプリケーションとそのパラメータ情報の記載方法について説明します。</div>
</div>
<section id="exastro-it-automation">
<h2>Exastro IT Automation 連携<a class="headerlink" href="#exastro-it-automation" title="Permalink to this heading">¶</a></h2>
<div class="line-block">
<div class="line">Exastro IT Automation (ITA) と連携する際に利用するアクションパラメータについて記載します。</div>
<div class="line">ITA と連携する場合、作業対象のホストや投入するパラメータを ITA と OASE のどちらで管理するかによってアクションパラメータの記載方法が変わってきます。</div>
</div>
<section id="ita">
<h3>ITAアクションパラメータ<a class="headerlink" href="#ita" title="Permalink to this heading">¶</a></h3>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>パラメータ分類</p></th>
<th class="head"><p>パラメータ変数</p></th>
<th class="head"><p>パラメータ値</p></th>
<th class="head"><p>入力例</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td rowspan="2"><p>ドライバ名</p></td>
<td rowspan="2"><p>ITA_NAME</p></td>
<td rowspan="2"><p>ITAドライバ名。</p>
<p>必須項目です。</p>
</td>
<td rowspan="2"><p>ITA_NAME=exastro-ita01</p></td>
</tr>
<tr class="row-odd"></tr>
<tr class="row-even"><td rowspan="6"><p>ジョブフロー</p></td>
<td rowspan="3"><p>CONDUCTOR_CLASS_ID</p></td>
<td rowspan="3"><p>実行するConductorクラスID。</p>
<p>ConductorクラスIDはConductorクラス一覧で確認できます。</p>
<p>SYMPHONY_CLASS_IDのどちらか一つのみを選択する必要があります。</p>
</td>
<td rowspan="3"><p>CONDUCTOR_CLASS_ID=2</p></td>
</tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"><td rowspan="3"><p>SYMPHONY_CLASS_ID</p></td>
<td rowspan="3"><p>実行するSymphonyクラスID。</p>
<p>SymphonyクラスIDはSymphonyクラス一覧で確認できます。</p>
<p>CONDUCTOR_CLASS_IDのどちらか一つのみを選択する必要があります。</p>
</td>
<td rowspan="3"><p>SYMPHONY_CLASS_ID=3</p></td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"><td rowspan="2"><p>オペレーション</p></td>
<td rowspan="2"><p>OPERATION_ID</p></td>
<td rowspan="2"><p>作業を実行する際に利用するオペレーションID。</p>
<p>OPERATION_ID を利用する場合、作業対象やメニュー連携はできません。</p>
</td>
<td rowspan="2"><p>OPERATION_ID=4</p></td>
</tr>
<tr class="row-odd"></tr>
<tr class="row-even"><td rowspan="8"><p>投入パラメータ</p></td>
<td rowspan="4"><p>MENU_ID</p></td>
<td rowspan="4"><p>ITA のメニューIDを指定。</p>
<p>連携可能なメニューはホストグループ利用が有効になっているメニューに限られます。</p>
<p>&lt;メニューID&gt;:&lt;メニューID&gt;:...</p>
<p>CONVERT_FLGの指定が必要です。</p>
</td>
<td rowspan="4"><p>MENU_ID=1</p>
<p>MENU_ID=1:2</p>
</td>
</tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"><td rowspan="4"><p>CONVERT_FLG</p></td>
<td rowspan="4"><p>作業対象のホストをメッセージから利用するためのフラグです。</p>
<p>MEMU_IDの利用時に指定が必要です。</p>
<p><kbd class="kbd docutils literal notranslate">TRUE</kbd> : 取得したメッセージを作業対象ホスト名として利用します。</p>
<p><kbd class="kbd docutils literal notranslate">FALSE</kbd> : 取得したメッセージの一部を抽出した文字列を作業対象ホスト名として利用します。</p>
</td>
<td rowspan="4"><p>CONVERT_FLG=TRUE</p>
<p>CONVERT_FLG=FALSE</p>
</td>
</tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"><td rowspan="8"><p>作業対象</p></td>
<td rowspan="3"><p>SERVER_LIST</p></td>
<td rowspan="3"><p>ITA の機器一覧に登録されている作業対象ホスト。</p>
<p>OPERATION_ID は自動で払い出されます。</p>
<p>OPERATION_IDおよびMENU_IDとの併用はできません。</p>
</td>
<td rowspan="3"><p>SERVER_LIST=www01</p>
<p>SERVER_LIST=www01:www02</p>
</td>
</tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"><td rowspan="3"><p>HOST_NAME</p></td>
<td rowspan="3"><p>ITA のホストグループ管理のホスト紐付け管理に登録されているホスト名。</p>
<p>&lt;メニューID&gt;:&lt;ホスト名&gt;&amp;&lt;ホスト名&gt;&amp;...|&lt;メニューID&gt;:&lt;ホスト名&gt;...</p>
<p>MENU_ID利用時のみ指定ができます。</p>
</td>
<td rowspan="3"><p>HOST_NAME=1:db01</p>
<p>HOST_NAME=1:db01&amp;db02|2:www01</p>
</td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"><td rowspan="2"><p>HOSTGROUP_NAME</p></td>
<td rowspan="2"><p>ITA のホストグループ管理のホストグループ一覧で管理されているホストグループ名。</p>
<p>MENU_ID利用時のみ指定ができます。</p>
</td>
<td rowspan="2"><p>HOSTGROUP_NAME=1:db-group|2:web-group</p></td>
</tr>
<tr class="row-odd"></tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">注釈</p>
<div class="line-block">
<div class="line"><strong>CONVERT_FLGがTRUEの場合</strong></div>
<div class="line">条件部におけるルールの記述を以下のように加工した場合、使用することができます。</div>
<div class="line">・始めの条件を作業対象ホスト名でマッチングできるようにする。</div>
<div class="line">・2番目以降の条件をパラメータシートに連携する値でマッチングできるようにする。</div>
<div class="line">ルールにマッチングされた値がそのままパラメータシートへ登録を行います。</div>
<div class="line">パラメータシートへ値が登録される順番はイベント情報の順番になります。</div>
<div class="line"><br /></div>
<div class="line"><strong>CONVERT_FLGがFALSEの場合</strong></div>
<div class="line">条件部におけるルールの記述を加工せずに使用することができます。</div>
<div class="line">ITAのパラメータシートへ連携される値はマッチングされた文言から指定された抽出条件によって抽出します。</div>
<div class="line">抽出する値には作業対象ホストが必要です。</div>
<div class="line">パラメータシートへ値が登録される順番はメニューID毎に指定することができます。</div>
</div>
</div>
</section>
<section id="id2">
<h3>ユースケース<a class="headerlink" href="#id2" title="Permalink to this heading">¶</a></h3>
<div class="line-block">
<div class="line"><strong>Case 1</strong></div>
<div class="line">ITAで設定済みの機器とパラメータを利用する</div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ITA_NAME</span><span class="o">=</span><span class="n">exastro</span><span class="o">-</span><span class="n">ita01</span><span class="p">,</span><span class="n">CONDUCTOR_CLASS_ID</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="n">OPERATION_ID</span><span class="o">=</span><span class="mi">1</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ITA_NAME</span><span class="o">=</span><span class="n">exastro</span><span class="o">-</span><span class="n">ita01</span><span class="p">,</span><span class="n">SYMPHONY_CLASS_ID</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span><span class="n">OPERATION_ID</span><span class="o">=</span><span class="mi">2</span>
</pre></div>
</div>
<div class="line-block">
<div class="line"><strong>Case 2</strong></div>
<div class="line">ITAで設定済みの機器とパラメータを利用し、OASEでホストを指定する</div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ITA_NAME</span><span class="o">=</span><span class="n">exastro</span><span class="o">-</span><span class="n">ita01</span><span class="p">,</span><span class="n">CONDUCTOR_CLASS_ID</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="n">SERVER_LIST</span><span class="o">=</span><span class="n">www01</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ITA_NAME</span><span class="o">=</span><span class="n">exastro</span><span class="o">-</span><span class="n">ita01</span><span class="p">,</span><span class="n">SYMPHONY_CLASS_ID</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span><span class="n">SERVER_LIST</span><span class="o">=</span><span class="n">db01</span><span class="p">:</span><span class="n">db02</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ITA_NAME</span><span class="o">=</span><span class="n">exastro</span><span class="o">-</span><span class="n">ita01</span><span class="p">,</span><span class="n">CONDUCTOR_CLASS_ID</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="n">SERVER_LIST</span><span class="o">=</span><span class="p">{{</span> <span class="n">VAR_</span><span class="o">&lt;</span><span class="n">条件名</span><span class="o">&gt;</span> <span class="p">}}</span>
</pre></div>
</div>
<div class="line-block">
<div class="line"><strong>Case 3</strong></div>
<div class="line">ITAで設定済みの対象ホストまたは対象ホストグループとパラメータシートを利用し、OASEで対象ホストまたは対象ホストグループを指定する。</div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ITA_NAME</span><span class="o">=</span><span class="n">exastro</span><span class="o">-</span><span class="n">ita01</span><span class="p">,</span><span class="n">CONDUCTOR_CLASS_ID</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="n">MENU_ID</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="n">HOST_NAME</span><span class="o">=</span><span class="mi">1</span><span class="p">:</span><span class="n">www01</span><span class="p">,</span><span class="n">CONVERT_FLG</span><span class="o">=</span><span class="n">FALSE</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ITA_NAME</span><span class="o">=</span><span class="n">exastro</span><span class="o">-</span><span class="n">ita01</span><span class="p">,</span><span class="n">CONDUCTOR_CLASS_ID</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="n">MENU_ID</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="n">HOSTGROUP_NAME</span><span class="o">=</span><span class="mi">1</span><span class="p">:</span><span class="n">web</span><span class="o">-</span><span class="n">group</span><span class="p">,</span><span class="n">CONVERT_FLG</span><span class="o">=</span><span class="n">FALSE</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ITA_NAME</span><span class="o">=</span><span class="n">exastro</span><span class="o">-</span><span class="n">ita01</span><span class="p">,</span><span class="n">SYMPHONY_CLASS_ID</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span><span class="n">MENU_ID</span><span class="o">=</span><span class="mi">2</span><span class="p">:</span><span class="mi">3</span><span class="p">:</span><span class="mi">4</span><span class="p">,</span><span class="n">HOST_NAME</span><span class="o">=</span><span class="mi">2</span><span class="p">:</span><span class="n">www01</span><span class="p">,</span><span class="n">HOSTGROUP_NAME</span><span class="o">=</span><span class="mi">3</span><span class="p">:</span><span class="n">db</span><span class="o">-</span><span class="n">group</span><span class="o">|</span><span class="mi">4</span><span class="p">:</span><span class="n">app1</span><span class="o">-</span><span class="n">group</span><span class="o">&amp;</span><span class="n">app2</span><span class="o">-</span><span class="n">group</span><span class="p">,</span><span class="n">CONVERT_FLG</span><span class="o">=</span><span class="n">FALSE</span>
</pre></div>
</div>
<div class="line-block">
<div class="line"><strong>Case 4</strong></div>
<div class="line">第1条件式にマッチした値をホスト名として、第2条件式以降にマッチした値をパラメータシートに連携する値として指定する。</div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ITA_NAME</span><span class="o">=</span><span class="n">exastro</span><span class="o">-</span><span class="n">ita01</span><span class="p">,</span><span class="n">CONDUCTOR_CLASS_ID</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="n">CONVERT_FLG</span><span class="o">=</span><span class="n">TRUE</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ITA_NAME</span><span class="o">=</span><span class="n">exastro</span><span class="o">-</span><span class="n">ita01</span><span class="p">,</span><span class="n">SYMPHONY_CLASS_ID</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span><span class="n">CONVERT_FLG</span><span class="o">=</span><span class="n">TRUE</span>
</pre></div>
</div>
<div class="line-block">
<div class="line"><strong>Case 5</strong></div>
<div class="line">第1条件式にマッチした値をホスト名として、第2条件式以降にマッチした値の一部を抽出してパラメータシートに連携する値として指定する。</div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ITA_NAME</span><span class="o">=</span><span class="n">exastro</span><span class="o">-</span><span class="n">ita01</span><span class="p">,</span><span class="n">CONDUCTOR_CLASS_ID</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="n">CONVERT_FLG</span><span class="o">=</span><span class="n">FALSE</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ITA_NAME</span><span class="o">=</span><span class="n">exastro</span><span class="o">-</span><span class="n">ita01</span><span class="p">,</span><span class="n">SYMPHONY_CLASS_ID</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span><span class="n">CONVERT_FLG</span><span class="o">=</span><span class="n">FALSE</span>
</pre></div>
</div>
</section>
</section>
<section id="mail">
<h2>Mail 連携<a class="headerlink" href="#mail" title="Permalink to this heading">¶</a></h2>
<div class="line-block">
<div class="line">メール通知する際に利用するアクションパラメータについて記載します。</div>
</div>
<section id="id3">
<h3>Mailアクションパラメータ<a class="headerlink" href="#id3" title="Permalink to this heading">¶</a></h3>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>パラメータ分類</p></th>
<th class="head"><p>パラメータ変数</p></th>
<th class="head"><p>パラメータ値</p></th>
<th class="head"><p>入力例</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td rowspan="2"><p>ドライバ名</p></td>
<td rowspan="2"><p>MAIL_NAME</p></td>
<td rowspan="2"><p>Mailドライバ名。</p>
<p>必須項目です。</p>
</td>
<td rowspan="2"><p>MAIL_NAME=management-mail</p></td>
</tr>
<tr class="row-odd"></tr>
<tr class="row-even"><td rowspan="6"><p>通知先</p></td>
<td rowspan="2"><p>MAIL_TO</p></td>
<td rowspan="2"><p>宛先エンベロープToのメールアドレスを指定します。</p>
<p>必須項目です。</p>
</td>
<td rowspan="2"><p><a class="reference external" href="mailto:MAIL_TO=maintener&#37;&#52;&#48;example&#46;com">MAIL_TO=maintener<span>&#64;</span>example<span>&#46;</span>com</a></p></td>
</tr>
<tr class="row-odd"></tr>
<tr class="row-even"><td rowspan="2"><p>MAIL_CC</p></td>
<td rowspan="2"><p>CCのメールアドレスを指定します。</p>
<p>必須項目ですが、パラメータ値記載無しも許容されます。</p>
</td>
<td rowspan="2"><p><a class="reference external" href="mailto:MAIL_CC=dev-team&#37;&#52;&#48;example&#46;com">MAIL_CC=dev-team<span>&#64;</span>example<span>&#46;</span>com</a></p></td>
</tr>
<tr class="row-odd"></tr>
<tr class="row-even"><td rowspan="2"><p>MAIL_BCC</p></td>
<td rowspan="2"><p>BCCのメールアドレスを指定します。</p>
<p>必須項目ですが、パラメータ値記載無しも許容されます。</p>
</td>
<td rowspan="2"><p>MAIL_BCC=</p></td>
</tr>
<tr class="row-odd"></tr>
<tr class="row-even"><td rowspan="2"><p>テンプレート</p></td>
<td rowspan="2"><p>MAIL_TEMPLATE</p></td>
<td rowspan="2"><p>アクション設定-メールテンプレートのテンプレート名を指定します。</p>
<p>必須項目ですが、パラメータ値記載無しも許容されます。</p>
</td>
<td rowspan="2"><p><a class="reference external" href="mailto:MAIL_TO=maintener&#37;&#52;&#48;example&#46;com">MAIL_TO=maintener<span>&#64;</span>example<span>&#46;</span>com</a></p></td>
</tr>
<tr class="row-odd"></tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">注釈</p>
<div class="line-block">
<div class="line">MAIL_TOにメールアドレスの指定、または、MAIL_TEMPLATEで指定したテンプレートに宛先のメールアドレスの指定、のどちらかが必要です。</div>
</div>
</div>
</section>
<section id="id4">
<h3>ユースケース<a class="headerlink" href="#id4" title="Permalink to this heading">¶</a></h3>
<div class="line-block">
<div class="line"><strong>Case 1</strong></div>
<div class="line">特定のユーザに対して通知メールを送信する。</div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">MAIL_NAME</span><span class="o">=</span><span class="n">management</span><span class="o">-</span><span class="n">mail</span><span class="p">,</span><span class="n">MAIL_TO</span><span class="o">=</span><span class="n">maintener</span><span class="nd">@example</span><span class="o">.</span><span class="n">com</span><span class="p">,</span><span class="n">MAIL_CC</span><span class="o">=</span><span class="n">dev</span><span class="o">-</span><span class="n">team</span><span class="nd">@example</span><span class="o">.</span><span class="n">com</span><span class="p">,</span><span class="n">MAIL_BCC</span><span class="o">=</span>
</pre></div>
</div>
<div class="line-block">
<div class="line"><strong>Case 2</strong></div>
<div class="line">特定のユーザに対してテンプレートを利用した通知メールを送信する。</div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">MAIL_NAME</span><span class="o">=</span><span class="n">management</span><span class="o">-</span><span class="n">mail</span><span class="p">,</span><span class="n">MAIL_TO</span><span class="o">=</span><span class="p">,</span><span class="n">MAIL_CC</span><span class="o">=</span><span class="n">dev</span><span class="o">-</span><span class="n">team</span><span class="nd">@example</span><span class="o">.</span><span class="n">com</span><span class="p">,</span><span class="n">MAIL_BCC</span><span class="o">=</span><span class="p">,</span><span class="n">MAIL_TEMPLATE</span><span class="o">=</span><span class="n">service</span><span class="o">-</span><span class="n">down</span>
</pre></div>
</div>
</section>
</section>
<section id="servicenow">
<h2>ServiceNow 連携<a class="headerlink" href="#servicenow" title="Permalink to this heading">¶</a></h2>
<div class="line-block">
<div class="line">ServiceNow と連携する際に利用するアクションパラメータについて記載します。</div>
</div>
<section id="id5">
<h3>ServiceNowアクションパラメータ<a class="headerlink" href="#id5" title="Permalink to this heading">¶</a></h3>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>パラメータ分類</p></th>
<th class="head"><p>パラメータ変数</p></th>
<th class="head"><p>パラメータ値</p></th>
<th class="head"><p>入力例</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td rowspan="2"><p>ドライバ名</p></td>
<td rowspan="2"><p>SERVICENOW_NAME</p></td>
<td rowspan="2"><p>ServiceNowドライバ名。</p>
<p>必須項目です。</p>
</td>
<td rowspan="2"><p>SERVICENOW_NAME=department01</p></td>
</tr>
<tr class="row-odd"></tr>
<tr class="row-even"><td rowspan="3"><p>ワークフロー</p></td>
<td rowspan="3"><p>WORKFLOW_ID</p></td>
<td rowspan="3"><p>実行したいワークフローが紐づく <strong>ワークフロースケジュールの sys_id</strong> を指定します。</p>
<p>ワークフロー連携時のみ記載します。</p>
<div class="admonition warning">
<p class="admonition-title">警告</p>
<p>ワークフローの sys_id でないことに注意して下さい。</p>
</div>
</td>
<td rowspan="3"><p>WORLFLOW_ID=abcdef1234567890</p></td>
</tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"><td rowspan="9"><p>インシデント</p></td>
<td rowspan="5"><p>INCIDENT_STATUS</p></td>
<td rowspan="5"><p>インシデントの起票、もしくは、更新するステータスを指定します。
インシデント管理時のみ記載します。</p>
<p><kbd class="kbd docutils literal notranslate">NEW</kbd>: 新規インシデント起票時に指定します。
インシデント管理する場合は、必ず最初にマッチさせる必要があります。</p>
<p><kbd class="kbd docutils literal notranslate">IN_PROGRESS</kbd>: ステータスを対処中にする場合に指定します。
通常、ルールの記述の際にはアクション実行直前のルールで指定します。</p>
<p><kbd class="kbd docutils literal notranslate">RESOLVED</kbd>: ステータスを解決済みにする場合に指定します。
通常、ルールの記述の際にはアクション実行直後のルールで指定します。</p>
<p><kbd class="kbd docutils literal notranslate">CLOSED</kbd>: ステータスをクローズにする場合に指定します。
通常、ルールの記述の際にはクローズ承認後のルールで指定します。</p>
</td>
<td rowspan="5"><p>INCIDENT_STATUS=NEW</p>
<p>INCIDENT_STATUS=IN_PROGRESS</p>
<p>INCIDENT_STATUS=RESOLVED</p>
<p>INCIDENT_STATUS=CLOSED</p>
</td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"><td rowspan="2"><p>WORK_NOTES_APPROVAL</p></td>
<td rowspan="2"><p>アクション実行の許可文字列を指定します。</p>
<p>ServiceNow の対応するインシデントの作業メモに許可文字列が記入された場合のみ処理を続行します。
許可文字列が記入されない場合、このアクションは処理中のまま何もしません。</p>
</td>
<td rowspan="2"><p>WORK_NOTES_APPROVAL=APPROVED_ACTION</p>
<p>WORK_NOTES_APPROVAL=APPROVED_CLOSE</p>
</td>
</tr>
<tr class="row-odd"></tr>
<tr class="row-even"><td rowspan="2"><p>WORK_NOTES_REJECTED</p></td>
<td rowspan="2"><p>アクション実行の却下文字列を指定します。</p>
<p>ServiceNow の対応するインシデントの作業メモに却下文字列が記入された場合のみ処理を中止します。
却下文字列が記入されない場合、このアクションは処理中のまま何もしません。</p>
</td>
<td rowspan="2"><p>WORK_NOTES_REJECTED=REJECTED_ACTION</p>
<p>WORK_NOTES_REJECTED=REJECTED_CLOSE</p>
</td>
</tr>
<tr class="row-odd"></tr>
</tbody>
</table>
</section>
<section id="id6">
<h3>ユースケース<a class="headerlink" href="#id6" title="Permalink to this heading">¶</a></h3>
<div class="line-block">
<div class="line"><strong>Case 1</strong></div>
<div class="line">ワークフロースケジュールを利用して、ワークフローを実行する。</div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SERVICENOW_NAME</span><span class="o">=</span><span class="n">department01</span><span class="p">,</span><span class="n">WORKFLOW_ID</span><span class="o">=</span><span class="n">abcdef1234567890</span>
</pre></div>
</div>
<div class="line-block">
<div class="line"><strong>Case 2</strong></div>
<div class="line">インシデントの起票とステータスの更新をする。</div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SERVICENOW_NAME</span><span class="o">=</span><span class="n">department01</span><span class="p">,</span><span class="n">INCIDENT_STATUS</span><span class="o">=</span><span class="n">NEW</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SERVICENOW_NAME</span><span class="o">=</span><span class="n">department01</span><span class="p">,</span><span class="n">INCIDENT_STATUS</span><span class="o">=</span><span class="n">CLOSED</span>
</pre></div>
</div>
<div class="line-block">
<div class="line"><strong>Case 3</strong></div>
<div class="line">インシデントを利用して承認待ちをする。</div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SERVICENOW_NAME</span><span class="o">=</span><span class="n">department01</span><span class="p">,</span><span class="n">INCIDENT_STATUS</span><span class="o">=</span><span class="n">IN_PROGRESS</span><span class="p">,</span><span class="n">WORK_NOTES_APPROVAL</span><span class="o">=</span><span class="n">APPROVED_ACTION</span><span class="p">,</span><span class="n">WORK_NOTES_REJECTED</span><span class="o">=</span><span class="n">REJECTED_ACTION</span>
</pre></div>
</div>
</section>
<section id="id7">
<h3>インシデント管理のベストプラクティス<a class="headerlink" href="#id7" title="Permalink to this heading">¶</a></h3>
<div class="line-block">
<div class="line">Exastro OASE を使って、ServiceNow のインシデントと連携する場合は、下記のようにディシジョンテーブルファイルのルールを定義します。</div>
</div>
<table class="docutils align-default" id="rule-and-action">
<caption><span class="caption-number">表 9.10 </span><span class="caption-text">インシデントと対処を管理するための疑似的なルール</span><a class="headerlink" href="#rule-and-action" title="このテーブルへのパーマリンク">¶</a></caption>
<colgroup>
<col style="width: 12%" />
<col style="width: 21%" />
<col style="width: 18%" />
<col style="width: 24%" />
<col style="width: 24%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>ルール名</p></th>
<th class="head"><p>条件</p></th>
<th class="head"><p>発生事象</p></th>
<th class="head"><p>対処概要</p></th>
<th class="head"><p>アクションパラメータ※ドライバ名省略</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>インシデント起票</p></td>
<td><p>アラート名が &quot;.* is down&quot; である場合</p></td>
<td><p>サービスダウン発生</p></td>
<td><p>インシデントを起票します。[APPROVAL_REQUEST]</p></td>
<td><p>INCIDENT_STATUS=NEW</p></td>
</tr>
<tr class="row-odd"><td><p>処理中</p></td>
<td><p>アラート名が &quot;httpd is down&quot; である場合</p></td>
<td><p>Apache サービスダウン発生</p></td>
<td><p>サービス再開処理開始をします。</p></td>
<td><p>INCIDENT_STATUS=IN_PROGRESS</p></td>
</tr>
<tr class="row-even"><td><p>ITA実行</p></td>
<td><p>アラート名が &quot;httpd is down&quot; である場合</p></td>
<td><p>Apache サービスダウン発生</p></td>
<td><p>サービス再開処理を実施します。</p></td>
<td><p>CONDUCTOR_CLASS_ID=3,OPERATION_ID=4</p></td>
</tr>
<tr class="row-odd"><td><p>処理完了</p></td>
<td><p>アラート名が &quot;httpd is down&quot; である場合</p></td>
<td><p>Apache サービスダウン発生</p></td>
<td><p>サービス再開処理が完了しました。</p></td>
<td><p>INCIDENT_STATUS=RESOLVED</p></td>
</tr>
<tr class="row-even"><td><p>インシデントクローズ(承認あり)</p></td>
<td><p>アラート名が &quot;httpd is down&quot; である場合</p></td>
<td><p>Apache サービスダウン発生</p></td>
<td><p>インシデントをクローズします。対処内容を確認の上、問題なければクローズ承認をお願いします。</p></td>
<td><p>INCIDENT_STATUS=CLOSED,WORK_NOTES_APPROVAL=APPROVED_CLOSE,WORK_NOTES_REJECTED=REJECTED_CLOSE</p></td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line">ディシジョンテーブルファイルに記載した <strong class="program">ルール名</strong>、 <strong class="program">発生事象</strong>、 <strong class="program">対処概要</strong> は、ServiceNow のインシデントの説明欄に追記されます。</div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>2022-01-11 10:45:35
ルール名 : インシデントクローズ(承認あり)
発生事象 : Apache サービスダウン発生
対処概要 : インシデントをクローズします。対処内容を確認の上、問題なければクローズ承認をお願いします。
==================================================
2022-01-11 10:45:32
ルール名 : 処理完了
発生事象 : Apache サービスダウン発生
対処概要 : サービス再開処理が完了しました。
==================================================
2022-01-11 10:43:34
ルール名 : 処理中(承認あり)
発生事象 : サービス再開処理を開始します。
対処概要 : OASEにより通常ページに切り替えを行います。この対処に問題なければ承認をお願いします。
==================================================
2022-01-11 10:43:32
ルール名 : インシデント起票
発生事象 : サービスダウン発生
対処概要 : インシデントを起票します。[APPROVAL_REQUEST]
</pre></div>
</div>
<div class="line-block">
<div class="line">承認連携については、ServiceNow側での <a class="reference external" href="https://www.servicenow.co.jp/products/platform-flow-designer.html">Flow Designer</a> の設定が必要になります。</div>
<div class="line">具体的には、 <a class="reference internal" href="#approval-sequence"><span class="std std-numref">図 9.13</span></a> のように、インシデントテーブルの更新とインシデント内容説明文に記載されたトリガーとなる文字列(APPROVAL_REQUEST)を Flow 開始のトリガーとします。</div>
<div class="line">ユーザに承認依頼をし、承認された場合は作業メモに承認文字列を、却下された場合は作業メモに却下文字列を記入します。</div>
<div class="line">この作業メモの内容を Exastro OASE が読み取り、処理の継続か中止を決定します。</div>
</div>
<figure class="align-center" id="approval-sequence">
<a class="reference internal image-reference" href="../../../_images/approval_sequence.svg"><img alt="../../../_images/approval_sequence.svg" height="1201" src="../../../_images/approval_sequence.svg" width="1920" /></a>
<figcaption>
<p><span class="caption-number">図 9.13 </span><span class="caption-text"><a class="reference internal" href="rule_format.html#rule-and-action"><span class="std std-numref">表 9.4</span></a> にマッチするメッセージを取得した場合の処理の流れ</span><a class="headerlink" href="#approval-sequence" title="この画像へのパーマリンク">¶</a></p>
</figcaption>
</figure>
</section>
</section>
</section>


</div>


<div id="articleNavigation">
  <ul>
    <li class="prev"><a href="rule_format.html" title="前のトピックへ"><span>前のトピックへ</span><span class="section-number">9.2. </span>ルール作成</a></li>
    <li class="next"><a href="approval.html" title="次のトピックへ"><span>次のトピックへ</span><span class="section-number">9.4. </span>アクション承認</a></li>
  </ul>
</div>


<div id="pageTopLink">
  <a href="#container"><i>↑</i> Page Top</a>
</div>

</article>
</div>
</main>
</div><!-- End #contents -->
<div id="footer">
  <footer class="divInner">
    <small>Copyright © 2022 NEC Corporation</small>
  </footer>
</div><!-- End #footer -->

<div id="overlay"></div>

</div><!-- End #container -->
  </body>
</html>