==============
Action history
==============

| The following section explains the information needed for acquiring Action history.


Property
==========

| The property specified when API requesting are as following

.. table:: Event request property

   +---------------+----------+----------------------------+------------------------------------------------+
   | Property    | Data type | Description/Setting value                |  Setting value description                                    |
   +===============+==========+============================+================================================+
   | traceid       | Character string   | Specifies the Event serial No. of the Action history the user wants to acquire.               |
   +---------------+----------+---------------+-------------------------------------------------------------+
 

Request header
================

| The Header information needed for API requesting are as following.

.. table:: Request header

   +---------------+--------------------------------------+--------------------------------------+
   | Header      |Description/Setting value                           | Setting value description                            |
   +===============+======================================+======================================+
   | Content-Type  | Contents format                                                              |
   +               +--------------------------------------+--------------------------------------+
   |               | * application/json                   | Supports JSON format only.    |
   +---------------+--------------------------------------+--------------------------------------+

Response
==========

| The API Request responses are as following.

+---------------------+----------------------------------+------------------------------------------------------------------+--------------------------------------------------------------------------------------------------+
| Property                                             | Description/Return value                                                      | Return value description                                                                                       |
+=====================+==================================+==================================================================+==================================================================================================+
| result                                                 | API execution results.                                                                                                                                                |
+                                                        +------------------------------------------------------------------+--------------------------------------------------------------------------------------------------+
|                                                        | * true                                                           | Is output when the API Execution succeeds.                                                         |
+                                                        +------------------------------------------------------------------+--------------------------------------------------------------------------------------------------+
|                                                        | * false                                                          | Is output when the API Execution fails.                                                          |
+---------------------+----------------------------------+------------------------------------------------------------------+--------------------------------------------------------------------------------------------------+
| msg                                                    | Messages for the API Execution results.                                                                                                                              |
+                                                        +------------------------------------------------------------------+--------------------------------------------------------------------------------------------------+
|                                                        | * Successful completion.                                         | Ended successfully                                                                                         |
+                                                        +------------------------------------------------------------------+--------------------------------------------------------------------------------------------------+
|                                                        | * Successful completion. (Staging environment)                   | Ended successfully（Staging）                                                                         |
+                                                        +------------------------------------------------------------------+--------------------------------------------------------------------------------------------------+
|                                                        | * Successful completion. (Production environment)                | Ended successfully(Production)                                                                         |
+                                                        +------------------------------------------------------------------+--------------------------------------------------------------------------------------------------+
|                                                        | * Invalid trace ID                                               | Event Serial No. is invalid                                                                    |
+                                                        +------------------------------------------------------------------+--------------------------------------------------------------------------------------------------+
|                                                        | * Invalid data.                                                  | Data is invalid.                                                                               |
+                                                        +------------------------------------------------------------------+--------------------------------------------------------------------------------------------------+
|                                                        | * Invalid request. Must be GET. Not POST.                        | Request is invalid. The request must be POST and cannot be GET.                                 |
+                                                        +------------------------------------------------------------------+--------------------------------------------------------------------------------------------------+
|                                                        | * Invalid request format. Must be JSON.                          | Request format is invalid. The format must be JSON.                                             |
+                                                        +------------------------------------------------------------------+--------------------------------------------------------------------------------------------------+
|                                                        | * ActionType does not exists.                                    | The Action type does not exist.                                                                 |
+                                                        +------------------------------------------------------------------+--------------------------------------------------------------------------------------------------+
|                                                        | * Unexpected error.                                              | An unexpected error occurred.                                                                             |
+---------------------+----------------------------------+------------------------------------------------------------------+--------------------------------------------------------------------------------------------------+
| action_history_list                                    | Contains action history information for the requests Event serial number.                                                                                       |
+---------------------+----------------------------------+------------------------------------------------------------------+--------------------------------------------------------------------------------------------------+
|                     | status                           | Status                                                                                                                                                          |
+                     +                                  +------------------------------------------------------------------+--------------------------------------------------------------------------------------------------+
|                     |                                  | * Not processed                                                         |                                                                                                  |
+                     +                                  +------------------------------------------------------------------+--------------------------------------------------------------------------------------------------+
|                     |                                  | * Processing(Started acquiring Data)                                       |                                                                                                  |
+                     +                                  +------------------------------------------------------------------+--------------------------------------------------------------------------------------------------+
|                     |                                  | * Process complete(Ended successfully)                                             |                                                                                                  |
+                     +                                  +------------------------------------------------------------------+--------------------------------------------------------------------------------------------------+
|                     |                                  | * Force process complete                                                   | If an error occurs and the process won't end, the system will force change the status from "Processing" to "Force process complete".         |
+                     +                                  +------------------------------------------------------------------+--------------------------------------------------------------------------------------------------+
|                     |                                  | * Error(Server error)                                       | If this status is displayed, the "Action re-run" button in the Action history page will not be usable. |
+                     +                                  +------------------------------------------------------------------+--------------------------------------------------------------------------------------------------+
|                     |                                  | * Waiting for approval                                                       |                                                                                                  |
+                     +                                  +------------------------------------------------------------------+--------------------------------------------------------------------------------------------------+
|                     |                                  | * Process complete                                                       |                                                                                                  |
+                     +                                  +------------------------------------------------------------------+--------------------------------------------------------------------------------------------------+
|                     |                                  | * Exastro request                                              |                                                                                                  |
+                     +                                  +------------------------------------------------------------------+--------------------------------------------------------------------------------------------------+
|                     |                                  | * Processing(Retrying)                                           |                                                                                                  |
+                     +                                  +------------------------------------------------------------------+--------------------------------------------------------------------------------------------------+
|                     |                                  | * Action suspended                                                |                                                                                                  |
+                     +                                  +------------------------------------------------------------------+--------------------------------------------------------------------------------------------------+
|                     |                                  | * Pre-execution action error                                         |                                                                                                  |
+                     +                                  +------------------------------------------------------------------+--------------------------------------------------------------------------------------------------+
|                     |                                  | * action execution error                                        |                                                                                                  |
+                     +                                  +------------------------------------------------------------------+--------------------------------------------------------------------------------------------------+
|                     |                                  | * Not executed                                                         |                                                                                                  |
+                     +                                  +------------------------------------------------------------------+--------------------------------------------------------------------------------------------------+
|                     |                                  | * Executing                                                         |                                                                                                  |
+                     +                                  +------------------------------------------------------------------+--------------------------------------------------------------------------------------------------+
|                     |                                  | * Error                                                           |                                                                                                  |
+                     +                                  +------------------------------------------------------------------+--------------------------------------------------------------------------------------------------+
|                     |                                  | * Removed                                                           |                                                                                                  |
+                     +                                  +------------------------------------------------------------------+--------------------------------------------------------------------------------------------------+
|                     |                                  | * Failed to acquire status                                                   |                                                                                                  |
+                     +                                  +------------------------------------------------------------------+--------------------------------------------------------------------------------------------------+
|                     |                                  | * Stopped                                                         |                                                                                                  |
+                     +----------------------------------+------------------------------------------------------------------+--------------------------------------------------------------------------------------------------+
|                     | rule_type_name                   | Displays the name of the decision table                                                                 .                                                             |
+                     +----------------------------------+------------------------------------------------------------------+--------------------------------------------------------------------------------------------------+
|                     | rule_name                        | Displays the name of the rule set in the Decision table file.                                                                                                      |
+                     +----------------------------------+------------------------------------------------------------------+--------------------------------------------------------------------------------------------------+
|                     | action_type_id                   | Action type                                                                                                                                                      |
+                     +                                  +------------------------------------------------------------------+--------------------------------------------------------------------------------------------------+
|                     |                                  | * ITA                                                            | Displays the Version information at the end. E.g. ITA(ver1)                                               |
+                     +                                  +------------------------------------------------------------------+--------------------------------------------------------------------------------------------------+
|                     |                                  | * Mail                                                         | Edisplays the Version information at the end.  E.g. mail(ver1)                                              |
+                     +----------------------------------+------------------------------------------------------------------+--------------------------------------------------------------------------------------------------+
|                     | last_update_timestamp            | Displays the last date/time it was updated.                                                                                                                                        |
+                     +----------------------------------+------------------------------------------------------------------+--------------------------------------------------------------------------------------------------+
|                     | last_update_user                 | Displays the last user who updated it.                                                                                                                                          |
+---------------------+----------------------------------+------------------------------------------------------------------+--------------------------------------------------------------------------------------------------+

Example
=======

| The request below is sent to the decision table, *decisiontable001*, as an example. The response can be seen at the bottom.

Request
----------

.. code-block:: sh

   curl -X GET -k 'https://<fqdn_or_ip_address>/oase_web/restapi/actionhistory/historyrequest' \
        -H 'accept: application/json' \
        -d '{
             ”traceid”: ”TOS_20210412053112220048_0000000010”
            }'

Response
----------

.. code-block:: json

   {
     "result": true,
     "msg": "Successful completion.",
     "action_history_list": [
       {
         "status": "Proccess complete(Normal end)",
         "rule_type_name": "Rule type 001",
         "rule_name": "rule01",
         "action_type_id": "ITA(ver1)",
         "last_update_timestamp": "2018/11/20 14:31",
         "last_update_user": "Action driver procedure"
       }
     ]
   }

